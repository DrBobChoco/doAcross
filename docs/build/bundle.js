var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(o)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(t){let e;return i(t,(t=>e=t))(),e}function a(t,e,n){t.$$.on_destroy.push(i(e,n))}function f(t,e,n){return t.set(n),e}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),h=d?t=>requestAnimationFrame(t):t;const m=new Set;function g(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&h(g)}function $(t,e){t.appendChild(e)}function v(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y(t){const e=k("style");return function(t,e){$(t.head||t,e)}(v(t),e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function _(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function E(){return x(" ")}function D(){return x("")}function I(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function C(t,e,n){t.classList[n?"add":"remove"](e)}function K(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}const j=new Map;let N,R=0;function O(t,e,n,o,r,s,l,c=0){const i=16.666/o;let u="{\n";for(let t=0;t<=1;t+=i){const o=e+(n-e)*s(t);u+=100*t+`%{${l(o,1-o)}}\n`}const a=u+`100% {${l(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${c}`,d=v(t),{stylesheet:p,rules:h}=j.get(d)||function(t,e){const n={stylesheet:y(e),rules:{}};return j.set(t,n),n}(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${a}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${o}ms linear ${r}ms 1 both`,R+=1,f}function L(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),R-=r,R||h((()=>{R||(j.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),j.clear())})))}function z(t){N=t}function U(){if(!N)throw new Error("Function called outside component initialization");return N}function B(t){U().$$.on_destroy.push(t)}function T(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const M=[],P=[],W=[],Y=[],q=Promise.resolve();let F=!1;function H(){F||(F=!0,q.then(Q))}function X(){return H(),q}function J(t){W.push(t)}const V=new Set;let Z,G=0;function Q(){const t=N;do{for(;G<M.length;){const t=M[G];G++,z(t),tt(t.$$)}for(z(null),M.length=0,G=0;P.length;)P.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];V.has(e)||(V.add(e),e())}W.length=0}while(M.length);for(;Y.length;)Y.pop()();F=!1,V.clear(),z(t)}function tt(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}function et(t,e,n){t.dispatchEvent(K(`${e?"intro":"outro"}${n}`))}const nt=new Set;let ot;function rt(){ot={r:0,c:[],p:ot}}function st(){ot.r||s(ot.c),ot=ot.p}function lt(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function ct(t,e,n,o){if(t&&t.o){if(nt.has(t))return;nt.add(t),ot.c.push((()=>{nt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const it={duration:0};function ut(n,o,r,c){let i=o(n,r),u=c?0:1,a=null,f=null,d=null;function $(){d&&L(n,d)}function v(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(o){const{delay:r=0,duration:l=300,easing:c=e,tick:y=t,css:w}=i||it,b={start:p()+r,b:o};o||(b.group=ot,ot.r+=1),a||f?f=b:(w&&($(),d=O(n,u,o,l,r,c,w)),o&&y(0,1),a=v(b,l),J((()=>et(n,o,"start"))),function(t){let e;0===m.size&&h(g),new Promise((n=>{m.add(e={c:t,f:n})}))}((t=>{if(f&&t>f.start&&(a=v(f,l),f=null,et(n,a.b,"start"),w&&($(),d=O(n,u,a.b,a.duration,0,c,i.css))),a)if(t>=a.end)y(u=a.b,1-u),et(n,a.b,"end"),f||(a.b?$():--a.group.r||s(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;u=a.a+a.d*c(e/a.duration),y(u,1-u)}return!(!a&&!f)})))}return{run(t){l(i)?(Z||(Z=Promise.resolve(),Z.then((()=>{Z=null}))),Z).then((()=>{i=i(),y(t)})):y(t)},end(){$(),a=f=null}}}function at(t,e){const n={},o={},r={$$scope:1};let s=t.length;for(;s--;){const l=t[s],c=e[s];if(c){for(const t in l)t in c||(o[t]=1);for(const t in c)r[t]||(n[t]=c[t],r[t]=1);t[s]=c}else for(const t in l)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function ft(t){return"object"==typeof t&&null!==t?t:{}}function dt(t){t&&t.c()}function pt(t,e,n,r){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,n),r||J((()=>{const e=i.map(o).filter(l);u?u.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(J)}function ht(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,n,o,l,c,i,u,a=[-1]){const f=N;z(e);const d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:a,skip_bound:!1,root:n.target||f.$$.root};u&&u(d.root);let p=!1;if(d.ctx=o?o(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&function(t,e){-1===t.$$.dirty[0]&&(M.push(t),H(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),p=!0,s(d.before_update),d.fragment=!!l&&l(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(b)}else d.fragment&&d.fragment.c();n.intro&&lt(e.$$.fragment),pt(e,n.target,n.anchor,n.customElement),Q()}z(f)}class gt{$destroy(){ht(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $t=[];function vt(t,e){return{subscribe:yt(t,e).subscribe}}function yt(e,n=t){let o;const r=new Set;function s(t){if(c(e,t)&&(e=t,o)){const t=!$t.length;for(const t of r)t[1](),$t.push(t,e);if(t){for(let t=0;t<$t.length;t+=2)$t[t][0]($t[t+1]);$t.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,c=t){const i=[l,c];return r.add(i),1===r.size&&(o=n(s)||t),l(e),()=>{r.delete(i),0===r.size&&(o(),o=null)}}}}function wt(e,n,o){const r=!Array.isArray(e),c=r?[e]:e,u=n.length<2;return vt(o,(e=>{let o=!1;const a=[];let f=0,d=t;const p=()=>{if(f)return;d();const o=n(r?a[0]:a,e);u?e(o):d=l(o)?o:t},h=c.map(((t,e)=>i(t,(t=>{a[e]=t,f&=~(1<<e),o&&p()}),(()=>{f|=1<<e}))));return o=!0,p(),function(){s(h),d()}}))}const bt=yt(null);function _t(t){const e=t-1;return e*e*e+1}function kt(t,{delay:e=0,duration:n=400,easing:o=_t,x:r=0,y:s=0,opacity:l=0}={}){const c=getComputedStyle(t),i=+c.opacity,u="none"===c.transform?"":c.transform,a=i*(1-l);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*r}px, ${(1-t)*s}px);\n\t\t\topacity: ${i-a*e}`}}function xt(t){let e,n,o,r,s,l,c,i,u;return{c(){e=k("div"),n=k("div"),o=x(t[0]),r=E(),s=k("a"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svelte-1gca6ry"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></svg>',S(s,"href","#/"),S(s,"aria-label","Close"),S(e,"class","toast svelte-1gca6ry")},m(l,a){var f;w(l,e,a),$(e,n),$(n,o),$(e,r),$(e,s),c=!0,i||(u=I(s,"click",(f=t[1],function(t){return t.preventDefault(),f.call(this,t)})),i=!0)},p(t,e){(!c||1&e)&&A(o,t[0])},i(t){c||(J((()=>{l||(l=ut(e,kt,{y:-75},!0)),l.run(1)})),c=!0)},o(t){l||(l=ut(e,kt,{y:-75},!1)),l.run(0),c=!1},d(t){t&&b(e),t&&l&&l.end(),i=!1,u()}}}function Et(t){let e,n,o=t[0]&&xt(t);return{c(){o&&o.c(),e=D()},m(t,r){o&&o.m(t,r),w(t,e,r),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&lt(o,1)):(o=xt(t),o.c(),lt(o,1),o.m(e.parentNode,e)):o&&(rt(),ct(o,1,1,(()=>{o=null})),st())},i(t){n||(lt(o),n=!0)},o(t){ct(o),n=!1},d(t){o&&o.d(t),t&&b(e)}}}function Dt(t,e,n){let o;a(t,bt,(t=>n(0,o=t)));return[o,()=>{f(bt,o=null,o)}]}class It extends gt{constructor(t){super(),mt(this,t,Dt,Et,c,{})}}function St(t){let e,o,r;const s=[t[2]];var l=t[0];function c(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return l&&(e=new l(c()),e.$on("routeEvent",t[7])),{c(){e&&dt(e.$$.fragment),o=D()},m(t,n){e&&pt(e,t,n),w(t,o,n),r=!0},p(t,n){const r=4&n?at(s,[ft(t[2])]):{};if(l!==(l=t[0])){if(e){rt();const t=e;ct(t.$$.fragment,1,0,(()=>{ht(t,1)})),st()}l?(e=new l(c()),e.$on("routeEvent",t[7]),dt(e.$$.fragment),lt(e.$$.fragment,1),pt(e,o.parentNode,o)):e=null}else l&&e.$set(r)},i(t){r||(e&&lt(e.$$.fragment,t),r=!0)},o(t){e&&ct(e.$$.fragment,t),r=!1},d(t){t&&b(o),e&&ht(e,t)}}}function At(t){let e,o,r;const s=[{params:t[1]},t[2]];var l=t[0];function c(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return l&&(e=new l(c()),e.$on("routeEvent",t[6])),{c(){e&&dt(e.$$.fragment),o=D()},m(t,n){e&&pt(e,t,n),w(t,o,n),r=!0},p(t,n){const r=6&n?at(s,[2&n&&{params:t[1]},4&n&&ft(t[2])]):{};if(l!==(l=t[0])){if(e){rt();const t=e;ct(t.$$.fragment,1,0,(()=>{ht(t,1)})),st()}l?(e=new l(c()),e.$on("routeEvent",t[6]),dt(e.$$.fragment),lt(e.$$.fragment,1),pt(e,o.parentNode,o)):e=null}else l&&e.$set(r)},i(t){r||(e&&lt(e.$$.fragment,t),r=!0)},o(t){e&&ct(e.$$.fragment,t),r=!1},d(t){t&&b(o),e&&ht(e,t)}}}function Ct(t){let e,n,o,r;const s=[At,St],l=[];function c(t,e){return t[1]?0:1}return e=c(t),n=l[e]=s[e](t),{c(){n.c(),o=D()},m(t,n){l[e].m(t,n),w(t,o,n),r=!0},p(t,[r]){let i=e;e=c(t),e===i?l[e].p(t,r):(rt(),ct(l[i],1,1,(()=>{l[i]=null})),st(),n=l[e],n?n.p(t,r):(n=l[e]=s[e](t),n.c()),lt(n,1),n.m(o.parentNode,o))},i(t){r||(lt(n),r=!0)},o(t){ct(n),r=!1},d(t){l[e].d(t),t&&b(o)}}}function Kt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const jt=vt(null,(function(t){t(Kt());const e=()=>{t(Kt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));wt(jt,(t=>t.location)),wt(jt,(t=>t.querystring));const Nt=yt(void 0);async function Rt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await X(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=("#"==t.charAt(0)?"":"#")+t}function Ot(t,e,n){let{routes:o={}}=e,{prefix:r=""}=e,{restoreScrollState:s=!1}=e;class l{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,r,s,l=[],c="",i=t.split("/");for(i[0]||i.shift();r=i.shift();)"*"===(n=r[0])?(l.push("wild"),c+="/(.*)"):":"===n?(o=r.indexOf("?",1),s=r.indexOf(".",1),l.push(r.substring(1,~o?o:~s?s:r.length)),c+=~o&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(c+=(~o?"?":"")+"\\"+r.substring(s))):c+="/"+r;return{keys:l,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=o}match(t){if(r)if("string"==typeof r){if(!t.startsWith(r))return null;t=t.substr(r.length)||"/"}else if(r instanceof RegExp){const e=t.match(r);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let o=0;for(;o<this._keys.length;){try{n[this._keys[o]]=decodeURIComponent(e[o+1]||"")||null}catch(t){n[this._keys[o]]=null}o++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const c=[];o instanceof Map?o.forEach(((t,e)=>{c.push(new l(e,t))})):Object.keys(o).forEach((t=>{c.push(new l(t,o[t]))}));let i=null,u=null,a={};const f=function(){const t=U();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=K(e,n,{cancelable:o});return r.slice().forEach((e=>{e.call(t,s)})),!s.defaultPrevented}return!0}}();async function d(t,e){await X(),f(t,e)}let p=null,h=null;var m;s&&(h=t=>{p=t.state&&(t.state.__svelte_spa_router_scrollY||t.state.__svelte_spa_router_scrollX)?t.state:null},window.addEventListener("popstate",h),m=()=>{var t;(t=p)?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)},U().$$.after_update.push(m));let g=null,$=null;const v=jt.subscribe((async t=>{g=t;let e=0;for(;e<c.length;){const o=c[e].match(t.location);if(!o){e++;continue}const r={route:c[e].path,location:t.location,querystring:t.querystring,userData:c[e].userData,params:o&&"object"==typeof o&&Object.keys(o).length?o:null};if(!await c[e].checkConditions(r))return n(0,i=null),$=null,void d("conditionsFailed",r);d("routeLoading",Object.assign({},r));const s=c[e].component;if($!=s){s.loading?(n(0,i=s.loading),$=s,n(1,u=s.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},r,{component:i,name:i.name,params:u}))):(n(0,i=null),$=null);const e=await s();if(t!=g)return;n(0,i=e&&e.default||e),$=s}return o&&"object"==typeof o&&Object.keys(o).length?n(1,u=o):n(1,u=null),n(2,a=c[e].props),void d("routeLoaded",Object.assign({},r,{component:i,name:i.name,params:u})).then((()=>{Nt.set(u)}))}n(0,i=null),$=null,Nt.set(void 0)}));return B((()=>{v(),h&&window.removeEventListener("popstate",h)})),t.$$set=t=>{"routes"in t&&n(3,o=t.routes),"prefix"in t&&n(4,r=t.prefix),"restoreScrollState"in t&&n(5,s=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=s?"manual":"auto")},[i,u,a,o,r,s,function(e){T.call(this,t,e)},function(e){T.call(this,t,e)}]}class Lt extends gt{constructor(t){super(),mt(this,t,Ot,Ct,c,{routes:3,prefix:4,restoreScrollState:5})}}const zt=yt(null),Ut=yt(null),Bt=yt(null),Tt=yt(null),Mt=yt(null),Pt=yt(!1),Wt=yt(null),Yt="|!!|",qt=()=>{const t={puzHeader:u(zt),puzStrings:u(Ut),cellData:u(Bt),clueData:u(Tt)},e=t.puzStrings.title+Yt+Date.now()+Yt+JSON.stringify(t);window.localStorage.setItem(t.puzHeader.saveKey,e)},Ft=t=>{const e=window.localStorage.getItem(t);if(null===e)throw"Missing save data";const n=e.split(Yt);if(n.length<3)throw"Bad save data";let o;try{o=JSON.parse(n.slice(2).join(Yt))}catch(t){throw"Error decoding save data"}zt.set(o.puzHeader),Ut.set(o.puzStrings),Bt.set(o.cellData),Tt.set(o.clueData),Mt.set(null),Pt.set(!1),Wt.set(null),Rt("/")},Ht=(()=>{let t,e;!function(t){t[t.BACKWARD=-1]="BACKWARD",t[t.STAY=0]="STAY",t[t.FORWARD=1]="FORWARD"}(t||(t={}));let n=!1,o=0;const r=()=>{e.focus(),e.value="DB",e.setSelectionRange(1,1)},s=()=>{Pt.set(!0)},l=()=>{Pt.set(!1)},c=()=>{const o=u(Mt);if(!o)return;let s,l="",c=e.value;if(r(),"B"===c)s=t.BACKWARD;else if("D"===c)s=t.STAY;else{if(c.length<3)return;if(s=t.FORWARD,l=c.charAt(1).toUpperCase(),!l.match(/^[A-Z]$/))return;n=!0}const a=u(Bt);a[o[0]][o[1]].content=l,Bt.set(a),i(s,1)},i=(t,e)=>{if(!(e*=t))return;let[n,o]=u(Mt);"across"===u(Wt)[1]?o+=e:n+=e;const r=u(zt);n<0||n>=r.height||o<0||o>=r.width||"block"===u(Bt)[n][o].type||Mt.set([n,o])};return{setKeyInput:t=>{t.addEventListener("focus",s),t.addEventListener("blur",l),t.addEventListener("keyup",c),e=t,0===o&&(o=window.setInterval((()=>{n&&(n=!1,qt())}),5e3))},acceptKeyInput:()=>{r(),setTimeout((()=>{const t=document.querySelector("div.grid div.selected");null==t||t.scrollIntoView({behavior:"smooth",block:"center"})}),500)},endKeyInput:()=>{e=null,n=!1,window.clearInterval(o),window.setTimeout(qt,0)}}})();function Xt(e){let n;return{c(){n=x(" ")},m(t,e){w(t,n,e)},p:t,d(t){t&&b(n)}}}function Jt(t){let e,n,o,r,s;return{c(){e=k("span"),n=x(t[1]),o=x(":"),r=E(),s=x(t[2]),S(e,"class","svelte-j2d1gl")},m(t,l){w(t,e,l),$(e,n),$(e,o),w(t,r,l),w(t,s,l)},p(t,e){2&e&&A(n,t[1]),4&e&&A(s,t[2])},d(t){t&&b(e),t&&b(r),t&&b(s)}}}function Vt(e){let n;function o(t,e){return t[0]?.[0]?Jt:Xt}let r=o(e),s=r(e);return{c(){n=k("div"),s.c(),S(n,"class","svelte-j2d1gl")},m(t,e){w(t,n,e),s.m(n,null)},p(t,[e]){r===(r=o(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&b(n),s.d()}}}function Zt(t,e,n){let o,r;a(t,Wt,(t=>n(0,o=t))),a(t,Tt,(t=>n(3,r=t)));let s="",l="";return t.$$.update=()=>{9&t.$$.dirty&&(null==o?void 0:o[0])&&(n(1,s=`${o[0]}${o[1].charAt(0).toUpperCase()}`),n(2,l=r[o[1]][o[0]].clue))},[o,s,l,r]}class Gt extends gt{constructor(t){super(),mt(this,t,Zt,Vt,c,{})}}function Qt(t){let e,n,o=("across"===t[0].starts?t[0].across:t[0].down)+"";return{c(){e=k("div"),n=x(o),S(e,"class","number svelte-1vrjvuu")},m(t,o){w(t,e,o),$(e,n)},p(t,e){1&e&&o!==(o=("across"===t[0].starts?t[0].across:t[0].down)+"")&&A(n,o)},d(t){t&&b(e)}}}function te(e){let n,o,r,s,l,c=("cell"===e[0].type?e[0].content:"")+"",i=e[0].starts&&Qt(e);return{c(){n=k("div"),i&&i.c(),o=E(),r=x(c),S(n,"class","svelte-1vrjvuu"),C(n,"block","block"===e[0].type),C(n,"selected",e[1]),C(n,"typable",e[3]),C(n,"hilight",e[2])},m(t,c){w(t,n,c),i&&i.m(n,null),$(n,o),$(n,r),s||(l=I(n,"click",e[4]),s=!0)},p(t,[e]){t[0].starts?i?i.p(t,e):(i=Qt(t),i.c(),i.m(n,o)):i&&(i.d(1),i=null),1&e&&c!==(c=("cell"===t[0].type?t[0].content:"")+"")&&A(r,c),1&e&&C(n,"block","block"===t[0].type),2&e&&C(n,"selected",t[1]),8&e&&C(n,"typable",t[3]),4&e&&C(n,"hilight",t[2])},i:t,o:t,d(t){t&&b(n),i&&i.d(),s=!1,l()}}}function ee(t,e,n){let o,r,s,l,c,i;a(t,Wt,(t=>n(6,l=t))),a(t,Mt,(t=>n(7,c=t))),a(t,Pt,(t=>n(8,i=t)));let{cellData:u}=e,{acceptKeyInput:d}=e;return t.$$set=t=>{"cellData"in t&&n(0,u=t.cellData),"acceptKeyInput"in t&&n(5,d=t.acceptKeyInput)},t.$$.update=()=>{129&t.$$.dirty&&n(1,o=(null==c?void 0:c[0])===u.rowNum&&(null==c?void 0:c[1])===u.colNum),258&t.$$.dirty&&n(3,r=o&&i),65&t.$$.dirty&&n(2,s="across"===(null==l?void 0:l[1])&&(null==l?void 0:l[0])===u.across||"down"===(null==l?void 0:l[1])&&(null==l?void 0:l[0])===u.down)},[u,o,s,r,()=>{"block"!==u.type&&(f(Mt,c=[u.rowNum,u.colNum],c),s||f(Wt,l=u.across?[u.across,"across"]:[u.down,"down"],l),d())},d,l,c,i]}class ne extends gt{constructor(t){super(),mt(this,t,ee,te,c,{cellData:0,acceptKeyInput:5})}}function oe(t,e,n){const o=t.slice();return o[2]=e[n],o}function re(t,e,n){const o=t.slice();return o[5]=e[n],o}function se(t){let e,n;return e=new ne({props:{cellData:t[5],acceptKeyInput:t[0]}}),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.cellData=t[5]),1&n&&(o.acceptKeyInput=t[0]),e.$set(o)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function le(t){let e,n,o,r=t[2],s=[];for(let e=0;e<r.length;e+=1)s[e]=se(re(t,r,e));const l=t=>ct(s[t],1,1,(()=>{s[t]=null}));return{c(){e=k("div");for(let t=0;t<s.length;t+=1)s[t].c();n=E(),S(e,"class","row svelte-942vup")},m(t,r){w(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);$(e,n),o=!0},p(t,o){if(3&o){let c;for(r=t[2],c=0;c<r.length;c+=1){const l=re(t,r,c);s[c]?(s[c].p(l,o),lt(s[c],1)):(s[c]=se(l),s[c].c(),lt(s[c],1),s[c].m(e,n))}for(rt(),c=r.length;c<s.length;c+=1)l(c);st()}},i(t){if(!o){for(let t=0;t<r.length;t+=1)lt(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)ct(s[t]);o=!1},d(t){t&&b(e),_(s,t)}}}function ce(t){let e,n,o,r=t[1],s=[];for(let e=0;e<r.length;e+=1)s[e]=le(oe(t,r,e));const l=t=>ct(s[t],1,1,(()=>{s[t]=null}));return{c(){e=k("section"),n=k("div");for(let t=0;t<s.length;t+=1)s[t].c();S(n,"class","grid svelte-942vup")},m(t,r){w(t,e,r),$(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);o=!0},p(t,[e]){if(3&e){let o;for(r=t[1],o=0;o<r.length;o+=1){const l=oe(t,r,o);s[o]?(s[o].p(l,e),lt(s[o],1)):(s[o]=le(l),s[o].c(),lt(s[o],1),s[o].m(n,null))}for(rt(),o=r.length;o<s.length;o+=1)l(o);st()}},i(t){if(!o){for(let t=0;t<r.length;t+=1)lt(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)ct(s[t]);o=!1},d(t){t&&b(e),_(s,t)}}}function ie(t,e,n){let o;a(t,Bt,(t=>n(1,o=t)));let{acceptKeyInput:r}=e;return t.$$set=t=>{"acceptKeyInput"in t&&n(0,r=t.acceptKeyInput)},[r,o]}class ue extends gt{constructor(t){super(),mt(this,t,ie,ce,c,{acceptKeyInput:0})}}function ae(e){let n,o,r,l,c,i,u,a;return{c(){n=k("div"),o=k("button"),r=x("Check"),l=E(),c=k("button"),i=x("Reveal"),o.disabled=e[0],S(o,"class","svelte-ni9sip"),c.disabled=e[0],S(c,"class","svelte-ni9sip"),S(n,"class","svelte-ni9sip")},m(t,s){w(t,n,s),$(n,o),$(o,r),$(n,l),$(n,c),$(c,i),u||(a=[I(o,"click",e[1]),I(c,"click",e[2])],u=!0)},p(t,[e]){1&e&&(o.disabled=t[0]),1&e&&(c.disabled=t[0])},i:t,o:t,d(t){t&&b(n),u=!1,s(a)}}}function fe(t,e,n){let o,r,s;a(t,Bt,(t=>n(5,o=t))),a(t,Wt,(t=>n(3,r=t))),a(t,Tt,(t=>n(4,s=t)));let l=!0;return t.$$.update=()=>{24&t.$$.dirty&&r&&n(0,l=!s[r[1]][r[0]].hasAnswer)},[l,()=>{if(r){o.flat().filter((t=>t[r[1]]===r[0])).forEach((t=>{t.content!==t.solution&&f(Bt,o[t.rowNum][t.colNum].content=" ",o)}))}},()=>{if(r){o.flat().filter((t=>t[r[1]]===r[0])).forEach((t=>f(Bt,o[t.rowNum][t.colNum].content=t.solution,o)))}},r,s]}class de extends gt{constructor(t){super(),mt(this,t,fe,ae,c,{})}}function pe(t,e,n){const o=t.slice();return o[8]=e[n],o}function he(t){let e,n,o,r,s,l,c,i,u=t[8].number+"",a=t[8].clue+"";function f(){return t[5](t[8])}return{c(){e=k("li"),n=k("span"),o=x(u),r=E(),s=x(a),l=E(),S(n,"class","svelte-1md3ysl"),S(e,"class","svelte-1md3ysl"),C(e,"hilight",t[2]?.[0]===t[8].number&&t[2]?.[1]===t[0])},m(t,u){w(t,e,u),$(e,n),$(n,o),$(e,r),$(e,s),$(e,l),c||(i=I(e,"click",f),c=!0)},p(n,r){t=n,2&r&&u!==(u=t[8].number+"")&&A(o,u),2&r&&a!==(a=t[8].clue+"")&&A(s,a),7&r&&C(e,"hilight",t[2]?.[0]===t[8].number&&t[2]?.[1]===t[0])},d(t){t&&b(e),c=!1,i()}}}function me(t){let e,n=t[8]&&he(t);return{c(){n&&n.c(),e=D()},m(t,o){n&&n.m(t,o),w(t,e,o)},p(t,o){t[8]?n?n.p(t,o):(n=he(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&b(e)}}}function ge(e){let n,o=e[1],r=[];for(let t=0;t<o.length;t+=1)r[t]=me(pe(e,o,t));return{c(){n=k("ul");for(let t=0;t<r.length;t+=1)r[t].c();S(n,"class","svelte-1md3ysl")},m(t,e){w(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(15&e){let s;for(o=t[1],s=0;s<o.length;s+=1){const l=pe(t,o,s);r[s]?r[s].p(l,e):(r[s]=me(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}},i:t,o:t,d(t){t&&b(n),_(r,t)}}}function $e(t,e,n){let o,r,s;a(t,Mt,(t=>n(6,o=t))),a(t,Bt,(t=>n(7,r=t))),a(t,Wt,(t=>n(2,s=t)));let{direction:l}=e,{clueData:c}=e,{acceptKeyInput:i}=e;const u=t=>{f(Wt,s=[t,l],s);const e=r.flat().filter((e=>e[l]===t&&(e.starts===l||null!==e.starts&&e.across===e.down)))[0];f(Mt,o=[e.rowNum,e.colNum],o),i()};return t.$$set=t=>{"direction"in t&&n(0,l=t.direction),"clueData"in t&&n(1,c=t.clueData),"acceptKeyInput"in t&&n(4,i=t.acceptKeyInput)},[l,c,s,u,i,t=>u(t.number)]}class ve extends gt{constructor(t){super(),mt(this,t,$e,ge,c,{direction:0,clueData:1,acceptKeyInput:4})}}function ye(t){let e,n,o,r,s,l,c,i,u,a,f,d,p,h,m,g,v,y,_,D,C,K,j,N,R,O,L,z=t[1].title+"",U=""!==t[1].author&&we(t);return f=new Gt({}),p=new ue({props:{acceptKeyInput:Ht.acceptKeyInput}}),m=new de({}),D=new ve({props:{direction:"across",clueData:t[2].across,acceptKeyInput:Ht.acceptKeyInput}}),N=new ve({props:{direction:"down",clueData:t[2].down,acceptKeyInput:Ht.acceptKeyInput}}),{c(){e=k("section"),n=k("h1"),o=x(z),U&&U.c(),r=E(),s=k("button"),s.textContent="Load",l=E(),c=k("section"),i=k("section"),u=k("input"),a=E(),dt(f.$$.fragment),d=E(),dt(p.$$.fragment),h=E(),dt(m.$$.fragment),g=E(),v=k("section"),y=k("h2"),y.textContent="Across",_=E(),dt(D.$$.fragment),C=E(),K=k("h2"),K.textContent="Down",j=E(),dt(N.$$.fragment),S(s,"class","svelte-1ho94sj"),S(n,"class","svelte-1ho94sj"),S(u,"type","text"),S(u,"maxlength","3"),S(u,"class","svelte-1ho94sj"),S(c,"class","svelte-1ho94sj"),S(e,"class","puzzle svelte-1ho94sj")},m(b,k){w(b,e,k),$(e,n),$(n,o),U&&U.m(n,null),$(n,r),$(n,s),$(e,l),$(e,c),$(c,i),$(i,u),t[4](u),$(i,a),pt(f,i,null),$(i,d),pt(p,i,null),$(i,h),pt(m,i,null),$(c,g),$(c,v),$(v,y),$(v,_),pt(D,v,null),$(v,C),$(v,K),$(v,j),pt(N,v,null),R=!0,O||(L=I(s,"click",t[3]),O=!0)},p(t,e){(!R||2&e)&&z!==(z=t[1].title+"")&&A(o,z),""!==t[1].author?U?U.p(t,e):(U=we(t),U.c(),U.m(n,r)):U&&(U.d(1),U=null);const s={};4&e&&(s.clueData=t[2].across),D.$set(s);const l={};4&e&&(l.clueData=t[2].down),N.$set(l)},i(t){R||(lt(f.$$.fragment,t),lt(p.$$.fragment,t),lt(m.$$.fragment,t),lt(D.$$.fragment,t),lt(N.$$.fragment,t),R=!0)},o(t){ct(f.$$.fragment,t),ct(p.$$.fragment,t),ct(m.$$.fragment,t),ct(D.$$.fragment,t),ct(N.$$.fragment,t),R=!1},d(n){n&&b(e),U&&U.d(),t[4](null),ht(f),ht(p),ht(m),ht(D),ht(N),O=!1,L()}}}function we(t){let e,n,o=t[1].author+"";return{c(){e=x(" by "),n=x(o)},m(t,o){w(t,e,o),w(t,n,o)},p(t,e){2&e&&o!==(o=t[1].author+"")&&A(n,o)},d(t){t&&b(e),t&&b(n)}}}function be(t){let e,n,o=null!==t[1]&&ye(t);return{c(){o&&o.c(),e=D()},m(t,r){o&&o.m(t,r),w(t,e,r),n=!0},p(t,[n]){null!==t[1]?o?(o.p(t,n),2&n&&lt(o,1)):(o=ye(t),o.c(),lt(o,1),o.m(e.parentNode,e)):o&&(rt(),ct(o,1,1,(()=>{o=null})),st())},i(t){n||(lt(o),n=!0)},o(t){ct(o),n=!1},d(t){o&&o.d(t),t&&b(e)}}}function _e(t,e,n){let o,r,s;var l;a(t,Ut,(t=>n(1,o=t))),a(t,Tt,(t=>n(2,r=t))),l=()=>{null!==o?Ht.setKeyInput(s):async function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await X();const e=("#"==t.charAt(0)?"":"#")+t;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}("/load")},U().$$.on_mount.push(l),B((()=>{null!==o&&Ht.endKeyInput()}));return[s,o,r,()=>{Rt("/load")},function(t){P[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}function ke(t,e,n){const o=t.slice();return o[4]=e[n],o}function xe(e){let n;return{c(){n=k("li"),n.textContent="No saved puzzles",S(n,"class","svelte-ghpvo0")},m(t,e){w(t,n,e)},p:t,d(t){t&&b(n)}}}function Ee(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=De(ke(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=D()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);w(t,e,n)},p(t,r){if(3&r){let s;for(n=t[0],s=0;s<n.length;s+=1){const l=ke(t,n,s);o[s]?o[s].p(l,r):(o[s]=De(l),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(t){_(o,t),t&&b(e)}}}function De(t){let e,n,o,r,s,l,c,i,u,a=t[4].title+"",f=new Date(parseInt(t[4].date,10)).toLocaleString()+"";function d(){return t[2](t[4])}return{c(){e=k("li"),n=k("span"),o=x(a),r=x(" (saved at "),s=k("span"),l=x(f),c=x(")\n            "),S(n,"class","title svelte-ghpvo0"),S(s,"class","date"),S(e,"class","svelte-ghpvo0")},m(t,a){w(t,e,a),$(e,n),$(n,o),$(e,r),$(e,s),$(s,l),$(e,c),i||(u=I(e,"click",d),i=!0)},p(e,n){t=e},d(t){t&&b(e),i=!1,u()}}}function Ie(e){let n;let o=function(t,e){return t[0].length?Ee:xe}(e),r=o(e);return{c(){n=k("ul"),r.c(),S(n,"class","svelte-ghpvo0")},m(t,e){w(t,n,e),r.m(n,null)},p(t,[e]){r.p(t,e)},i:t,o:t,d(t){t&&b(n),r.d()}}}function Se(t,e,n){let o;a(t,bt,(t=>n(3,o=t)));const r=(()=>{const t=window.localStorage;let e=[];for(let n=0;n<t.length;n++){let o=t.key(n);if("doAcross:"===o.substring(0,9)){const[n,r]=t.getItem(o).split(Yt).slice(0,2);e.push({saveKey:o,title:n,date:r})}}return e=e.sort(((t,e)=>t.date===e.date?0:t.date>e.date?-1:1)),e})(),s=t=>{try{Ft(t)}catch(t){f(bt,o="string"==typeof t?t:t.message,o)}};return[r,s,t=>s(t.saveKey)]}class Ae extends gt{constructor(t){super(),mt(this,t,Se,Ie,c,{})}}function Ce(e){let n,o,r,l,c,i,u,a,f,d,p,h,m;return d=new Ae({}),{c(){n=k("section"),o=k("h1"),o.textContent="Pick A Puzzle",r=E(),l=k("h2"),l.textContent="New",c=E(),i=k("input"),u=E(),a=k("h2"),a.textContent="Saved",f=E(),dt(d.$$.fragment),S(i,"type","file"),S(i,"accept",".puz")},m(t,s){w(t,n,s),$(n,o),$(n,r),$(n,l),$(n,c),$(n,i),$(n,u),$(n,a),$(n,f),pt(d,n,null),p=!0,h||(m=[I(i,"change",e[2]),I(i,"change",e[1])],h=!0)},p:t,i(t){p||(lt(d.$$.fragment,t),p=!0)},o(t){ct(d.$$.fragment,t),p=!1},d(t){t&&b(n),ht(d),h=!1,s(m)}}}function Ke(t,e,n){let o;return[o,()=>{(async t=>{var e,n,o;zt.set(null),Ut.set(null);const r=new DataView(await t.arrayBuffer()),s={checksum:r.getUint16(0,!0),fileMagic:await t.slice(2,13).text(),cibChecksum:r.getUint16(14,!0),maskedLowChecksums:r.getUint32(16),maskedHighChecksums:r.getUint32(20),version:(await t.slice(24,27).text()).trimEnd(),reserved:null,scrambledChecksum:r.getUint16(30,!0),width:r.getUint8(44),height:r.getUint8(45),numClues:r.getUint16(46,!0),unknownBitmask:r.getUint16(48,!0),scrambledTag:r.getUint16(50,!0),saveKey:null};if("ACROSS&DOWN"!==s.fileMagic)return!1;s.saveKey="doAcross:"+s.checksum.toString(16)+s.cibChecksum.toString(16)+s.maskedLowChecksums.toString(16)+s.maskedHighChecksums.toString(16);try{return Ft(s.saveKey),void bt.set("Loaded a previously saved version")}catch(t){}zt.set(s);const l=s.width*s.height,c=new RegExp(`.{${s.width}}`,"g"),i=(await t.slice(52,52+l).text()).match(c).map((t=>[...t])),u=(await t.slice(52+l,52+2*l).text()).match(c).map((t=>[...t]));let a=[],f=1,d=[],p={across:[],down:[]};for(let t=0;t<s.height;t++){let r=[];for(let l=0;l<s.width;l++){let s=0,c=0,h=null;"."!==u[t][l]&&("cell"===(null===(e=r[l-1])||void 0===e?void 0:e.type)?s=r[l-1].across:0!==l&&"block"!==r[l-1].type||void 0===u[t][l+1]||"."===u[t][l+1]||(s=f++,d.push([s,"across"]),h="across"),"cell"===(null===(n=a[t-1])||void 0===n?void 0:n[l].type)?c=a[t-1][l].down:0!==t&&"block"!==a[t-1][l].type||void 0===(null===(o=u[t+1])||void 0===o?void 0:o[l])||"."===u[t+1][l]||(c=h?s:f++,d.push([c,"down"]),h="down")),r.push({type:"."===u[t][l]?"block":"cell",rowNum:t,colNum:l,content:"-"===u[t][l]?" ":u[t][l],solution:i[t][l],across:s,down:c,starts:h}),s&&(void 0===p.across[s]&&(p.across[s]={}),void 0===p.across[s][i[t][l]]&&(p.across[s][i[t][l]]=0),p.across[s][i[t][l]]++),c&&(void 0===p.down[c]&&(p.down[c]={}),void 0===p.down[c][i[t][l]]&&(p.down[c][i[t][l]]=0),p.down[c][i[t][l]]++)}a.push(r)}Bt.set(a);const h=(await t.slice(52+2*l).text()).split("\0"),m={title:h[0],author:h[1],copyright:h[2],notes:h[3+s.numClues]};Ut.set(m);let g,$,v,y={across:[],down:[]};h.slice(3,3+s.numClues).forEach(((t,e)=>{[g,$]=d[e],v={number:g,direction:$,clue:t,hasAnswer:Object.keys(p[$][g]).length>1},"across"===$?y.across[g]=v:y.down[g]=v})),Tt.set(y),Mt.set(null),Wt.set(null),Rt("/")})(o[0])},function(){o=this.files,n(0,o)}]}var je={"/":class extends gt{constructor(t){super(),mt(this,t,_e,be,c,{})}},"/load":class extends gt{constructor(t){super(),mt(this,t,Ke,Ce,c,{})}}};function Ne(e){let n,o,r,s,l;return n=new It({}),s=new Lt({props:{routes:je}}),{c(){dt(n.$$.fragment),o=E(),r=k("main"),dt(s.$$.fragment),S(r,"class","svelte-1ipmjf6")},m(t,e){pt(n,t,e),w(t,o,e),w(t,r,e),pt(s,r,null),l=!0},p:t,i(t){l||(lt(n.$$.fragment,t),lt(s.$$.fragment,t),l=!0)},o(t){ct(n.$$.fragment,t),ct(s.$$.fragment,t),l=!1},d(t){ht(n,t),t&&b(o),t&&b(r),ht(s)}}}return new class extends gt{constructor(t){super(),mt(this,t,null,Ne,c,{})}}({target:document.body,props:{}})}();
