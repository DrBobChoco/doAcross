var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function c(t){t.forEach(n)}function l(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(t){let e;return r(t,(t=>e=t))(),e}function i(t,e,n){t.$$.on_destroy.push(r(e,n))}function a(t,e,n){return t.set(n),e}const d="undefined"!=typeof window;let f=d?()=>window.performance.now():()=>Date.now(),p=d?t=>requestAnimationFrame(t):t;const h=new Set;function m(t){h.forEach((e=>{e.c(t)||(h.delete(e),e.f())})),0!==h.size&&p(m)}function g(t,e){t.appendChild(e)}function $(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y(t){const e=k("style");return function(t,e){g(t.head||t,e)}($(t),e),e.sheet}function v(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function D(){return x(" ")}function K(){return x("")}function C(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function z(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e,n){t.classList[n?"add":"remove"](e)}const _=new Map;let S,N=0;function E(t,e,n,o,c,l,s,r=0){const u=16.666/o;let i="{\n";for(let t=0;t<=1;t+=u){const o=e+(n-e)*l(t);i+=100*t+`%{${s(o,1-o)}}\n`}const a=i+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${r}`,f=$(t),{stylesheet:p,rules:h}=_.get(f)||function(t,e){const n={stylesheet:y(e),rules:{}};return _.set(t,n),n}(f,t);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${c}ms 1 both`,N+=1,d}function R(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),c=n.length-o.length;c&&(t.style.animation=o.join(", "),N-=c,N||p((()=>{N||(_.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),_.clear())})))}function q(t){S=t}function L(){if(!S)throw new Error("Function called outside component initialization");return S}const O=[],U=[],B=[],T=[],M=Promise.resolve();let j=!1;function W(t){B.push(t)}const H=new Set;let F,P=0;function Y(){const t=S;do{for(;P<O.length;){const t=O[P];P++,q(t),J(t.$$)}for(q(null),O.length=0,P=0;U.length;)U.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];H.has(e)||(H.add(e),e())}B.length=0}while(O.length);for(;T.length;)T.pop()();j=!1,H.clear(),q(t)}function J(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}function V(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,o,e),c}(`${e?"intro":"outro"}${n}`))}const Z=new Set;let G;function Q(){G={r:0,c:[],p:G}}function X(){G.r||c(G.c),G=G.p}function tt(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function et(t,e,n,o){if(t&&t.o){if(Z.has(t))return;Z.add(t),G.c.push((()=>{Z.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const nt={duration:0};function ot(n,o,s,r){let u=o(n,s),i=r?0:1,a=null,d=null,g=null;function $(){g&&R(n,g)}function y(t,e){const n=t.b-i;return e*=Math.abs(n),{a:i,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:l=0,duration:s=300,easing:r=e,tick:v=t,css:w}=u||nt,b={start:f()+l,b:o};o||(b.group=G,G.r+=1),a||d?d=b:(w&&($(),g=E(n,i,o,s,l,r,w)),o&&v(0,1),a=y(b,s),W((()=>V(n,o,"start"))),function(t){let e;0===h.size&&p(m),new Promise((n=>{h.add(e={c:t,f:n})}))}((t=>{if(d&&t>d.start&&(a=y(d,s),d=null,V(n,a.b,"start"),w&&($(),g=E(n,i,a.b,a.duration,0,r,u.css))),a)if(t>=a.end)v(i=a.b,1-i),V(n,a.b,"end"),d||(a.b?$():--a.group.r||c(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;i=a.a+a.d*r(e/a.duration),v(i,1-i)}return!(!a&&!d)})))}return{run(t){l(u)?(F||(F=Promise.resolve(),F.then((()=>{F=null}))),F).then((()=>{u=u(),v(t)})):v(t)},end(){$(),a=d=null}}}function ct(t){t&&t.c()}function lt(t,e,o,s){const{fragment:r,on_mount:u,on_destroy:i,after_update:a}=t.$$;r&&r.m(e,o),s||W((()=>{const e=u.map(n).filter(l);i?i.push(...e):c(e),t.$$.on_mount=[]})),a.forEach(W)}function st(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){-1===t.$$.dirty[0]&&(O.push(t),j||(j=!0,M.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(e,n,l,s,r,u,i,a=[-1]){const d=S;q(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:r,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:a,skip_bound:!1,root:n.target||d.$$.root};i&&i(f.root);let p=!1;if(f.ctx=l?l(e,n.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return f.ctx&&r(f.ctx[t],f.ctx[t]=c)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](c),p&&rt(e,t)),n})):[],f.update(),p=!0,c(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&tt(e.$$.fragment),lt(e,n.target,n.anchor,n.customElement),Y()}q(d)}class it{$destroy(){st(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const at=[];function dt(e,n=t){let o;const c=new Set;function l(t){if(s(e,t)&&(e=t,o)){const t=!at.length;for(const t of c)t[1](),at.push(t,e);if(t){for(let t=0;t<at.length;t+=2)at[t][0](at[t+1]);at.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(s,r=t){const u=[s,r];return c.add(u),1===c.size&&(o=n(l)||t),s(e),()=>{c.delete(u),0===c.size&&(o(),o=null)}}}}const ft=dt(null),pt=dt("puzzle"),ht=dt(null),mt=dt(null),gt=dt(null),$t=dt(null),yt=dt(null),vt=dt(!1),wt=dt(null),bt="|!!|",kt=()=>{const t={puzHeader:u(ht),puzStrings:u(mt),cellData:u(gt),clueData:u($t)},e=t.puzStrings.title+bt+Date.now()+bt+JSON.stringify(t);window.localStorage.setItem(t.puzHeader.saveKey,e)},xt=t=>{const e=window.localStorage.getItem(t);if(null===e)throw"Missing save data";const n=e.split(bt);if(n.length<3)throw"Bad save data";let o;try{o=JSON.parse(n.slice(2).join(bt))}catch(t){throw"Error decoding save data"}ht.set(o.puzHeader),mt.set(o.puzStrings),gt.set(o.cellData),$t.set(o.clueData),yt.set(null),vt.set(!1),wt.set(null),pt.set("puzzle")};function Dt(t){const e=t-1;return e*e*e+1}function Kt(t,{delay:e=0,duration:n=400,easing:o=Dt,x:c=0,y:l=0,opacity:s=0}={}){const r=getComputedStyle(t),u=+r.opacity,i="none"===r.transform?"":r.transform,a=u*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${i} translate(${(1-t)*c}px, ${(1-t)*l}px);\n\t\t\topacity: ${u-a*e}`}}function Ct(t){let e,n,o,c,l,s,r,u,i;return{c(){e=k("div"),n=k("div"),o=x(t[0]),c=D(),l=k("a"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svelte-1gca6ry"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></svg>',I(l,"href","#/"),I(l,"aria-label","Close"),I(e,"class","toast svelte-1gca6ry")},m(s,a){var d;v(s,e,a),g(e,n),g(n,o),g(e,c),g(e,l),r=!0,u||(i=C(l,"click",(d=t[1],function(t){return t.preventDefault(),d.call(this,t)})),u=!0)},p(t,e){(!r||1&e)&&z(o,t[0])},i(t){r||(W((()=>{s||(s=ot(e,Kt,{y:-75},!0)),s.run(1)})),r=!0)},o(t){s||(s=ot(e,Kt,{y:-75},!1)),s.run(0),r=!1},d(t){t&&w(e),t&&s&&s.end(),u=!1,i()}}}function It(t){let e,n,o=t[0]&&Ct(t);return{c(){o&&o.c(),e=K()},m(t,c){o&&o.m(t,c),v(t,e,c),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&tt(o,1)):(o=Ct(t),o.c(),tt(o,1),o.m(e.parentNode,e)):o&&(Q(),et(o,1,1,(()=>{o=null})),X())},i(t){n||(tt(o),n=!0)},o(t){et(o),n=!1},d(t){o&&o.d(t),t&&w(e)}}}function zt(t,e,n){let o;i(t,ft,(t=>n(0,o=t)));return[o,()=>{a(ft,o=null,o)}]}class At extends it{constructor(t){super(),ut(this,t,zt,It,s,{})}}const _t=(()=>{let t,e;!function(t){t[t.BACKWARD=-1]="BACKWARD",t[t.STAY=0]="STAY",t[t.FORWARD=1]="FORWARD"}(t||(t={}));let n=!1,o=0;const c=()=>{vt.set(!0)},l=()=>{vt.set(!1)},s=e=>{const o=u(yt);if(!o)return;let c,l="";switch(e.code){case"Backspace":c=t.BACKWARD;break;case"Delete":c=t.STAY;break;default:if(c=t.FORWARD,l=e.key.charAt(0).toUpperCase(),!l.match(/^[A-Z]$/))return;n=!0}const s=u(gt);s[o[0]][o[1]].content=l,gt.set(s),r(c,1)},r=(t,e)=>{if(!(e*=t))return;let[n,o]=u(yt);"across"===u(wt)[1]?o+=e:n+=e;const c=u(ht);n<0||n>=c.height||o<0||o>=c.width||"block"===u(gt)[n][o].type||yt.set([n,o])};return{setKeyInput:t=>{t.addEventListener("focus",c),t.addEventListener("blur",l),t.addEventListener("keyup",s),e=t,0===o&&(o=window.setInterval((()=>{n&&(n=!1,kt())}),5e3))},acceptKeyInput:()=>{e.focus(),setTimeout((()=>{const t=document.querySelector("div.grid div.selected");null==t||t.scrollIntoView({behavior:"smooth",block:"center"})}))},endKeyInput:()=>{e=null,n=!1,window.clearInterval(o),window.setTimeout(kt,0)}}})();function St(e){let n;return{c(){n=x(" ")},m(t,e){v(t,n,e)},p:t,d(t){t&&w(n)}}}function Nt(t){let e,n,o,c,l;return{c(){e=k("span"),n=x(t[1]),o=x(":"),c=D(),l=x(t[2]),I(e,"class","svelte-15wa2sh")},m(t,s){v(t,e,s),g(e,n),g(e,o),v(t,c,s),v(t,l,s)},p(t,e){2&e&&z(n,t[1]),4&e&&z(l,t[2])},d(t){t&&w(e),t&&w(c),t&&w(l)}}}function Et(e){let n;function o(t,e){return t[0]?.[0]?Nt:St}let c=o(e),l=c(e);return{c(){n=k("div"),l.c(),I(n,"class","svelte-15wa2sh")},m(t,e){v(t,n,e),l.m(n,null)},p(t,[e]){c===(c=o(t))&&l?l.p(t,e):(l.d(1),l=c(t),l&&(l.c(),l.m(n,null)))},i:t,o:t,d(t){t&&w(n),l.d()}}}function Rt(t,e,n){let o,c;i(t,wt,(t=>n(0,o=t))),i(t,$t,(t=>n(3,c=t)));let l="",s="";return t.$$.update=()=>{9&t.$$.dirty&&(null==o?void 0:o[0])&&(n(1,l=`${o[0]}${o[1].charAt(0).toUpperCase()}`),n(2,s=c[o[1]][o[0]].clue))},[o,l,s,c]}class qt extends it{constructor(t){super(),ut(this,t,Rt,Et,s,{})}}function Lt(t){let e,n,o=("across"===t[0].starts?t[0].across:t[0].down)+"";return{c(){e=k("div"),n=x(o),I(e,"class","number svelte-14fo01e")},m(t,o){v(t,e,o),g(e,n)},p(t,e){1&e&&o!==(o=("across"===t[0].starts?t[0].across:t[0].down)+"")&&z(n,o)},d(t){t&&w(e)}}}function Ot(e){let n,o,c,l,s,r=("cell"===e[0].type?e[0].content:"")+"",u=e[0].starts&&Lt(e);return{c(){n=k("div"),u&&u.c(),o=D(),c=x(r),I(n,"class","svelte-14fo01e"),A(n,"block","block"===e[0].type),A(n,"selected",e[1]),A(n,"typable",e[3]),A(n,"hilight",e[2])},m(t,r){v(t,n,r),u&&u.m(n,null),g(n,o),g(n,c),l||(s=C(n,"click",e[4]),l=!0)},p(t,[e]){t[0].starts?u?u.p(t,e):(u=Lt(t),u.c(),u.m(n,o)):u&&(u.d(1),u=null),1&e&&r!==(r=("cell"===t[0].type?t[0].content:"")+"")&&z(c,r),1&e&&A(n,"block","block"===t[0].type),2&e&&A(n,"selected",t[1]),8&e&&A(n,"typable",t[3]),4&e&&A(n,"hilight",t[2])},i:t,o:t,d(t){t&&w(n),u&&u.d(),l=!1,s()}}}function Ut(t,e,n){let o,c,l,s,r,u;i(t,wt,(t=>n(6,s=t))),i(t,yt,(t=>n(7,r=t))),i(t,vt,(t=>n(8,u=t)));let{cellData:d}=e,{acceptKeyInput:f}=e;return t.$$set=t=>{"cellData"in t&&n(0,d=t.cellData),"acceptKeyInput"in t&&n(5,f=t.acceptKeyInput)},t.$$.update=()=>{129&t.$$.dirty&&n(1,o=(null==r?void 0:r[0])===d.rowNum&&(null==r?void 0:r[1])===d.colNum),258&t.$$.dirty&&n(3,c=o&&u),65&t.$$.dirty&&n(2,l="across"===(null==s?void 0:s[1])&&(null==s?void 0:s[0])===d.across||"down"===(null==s?void 0:s[1])&&(null==s?void 0:s[0])===d.down)},[d,o,l,c,()=>{"block"!==d.type&&(a(yt,r=[d.rowNum,d.colNum],r),l||a(wt,s=d.across?[d.across,"across"]:[d.down,"down"],s),f())},f,s,r,u]}class Bt extends it{constructor(t){super(),ut(this,t,Ut,Ot,s,{cellData:0,acceptKeyInput:5})}}function Tt(t,e,n){const o=t.slice();return o[2]=e[n],o}function Mt(t,e,n){const o=t.slice();return o[5]=e[n],o}function jt(t){let e,n;return e=new Bt({props:{cellData:t[5],acceptKeyInput:t[0]}}),{c(){ct(e.$$.fragment)},m(t,o){lt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.cellData=t[5]),1&n&&(o.acceptKeyInput=t[0]),e.$set(o)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Wt(t){let e,n,o,c=t[2],l=[];for(let e=0;e<c.length;e+=1)l[e]=jt(Mt(t,c,e));const s=t=>et(l[t],1,1,(()=>{l[t]=null}));return{c(){e=k("div");for(let t=0;t<l.length;t+=1)l[t].c();n=D(),I(e,"class","row svelte-942vup")},m(t,c){v(t,e,c);for(let t=0;t<l.length;t+=1)l[t].m(e,null);g(e,n),o=!0},p(t,o){if(3&o){let r;for(c=t[2],r=0;r<c.length;r+=1){const s=Mt(t,c,r);l[r]?(l[r].p(s,o),tt(l[r],1)):(l[r]=jt(s),l[r].c(),tt(l[r],1),l[r].m(e,n))}for(Q(),r=c.length;r<l.length;r+=1)s(r);X()}},i(t){if(!o){for(let t=0;t<c.length;t+=1)tt(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)et(l[t]);o=!1},d(t){t&&w(e),b(l,t)}}}function Ht(t){let e,n,o,c=t[1],l=[];for(let e=0;e<c.length;e+=1)l[e]=Wt(Tt(t,c,e));const s=t=>et(l[t],1,1,(()=>{l[t]=null}));return{c(){e=k("section"),n=k("div");for(let t=0;t<l.length;t+=1)l[t].c();I(n,"class","grid svelte-942vup")},m(t,c){v(t,e,c),g(e,n);for(let t=0;t<l.length;t+=1)l[t].m(n,null);o=!0},p(t,[e]){if(3&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const s=Tt(t,c,o);l[o]?(l[o].p(s,e),tt(l[o],1)):(l[o]=Wt(s),l[o].c(),tt(l[o],1),l[o].m(n,null))}for(Q(),o=c.length;o<l.length;o+=1)s(o);X()}},i(t){if(!o){for(let t=0;t<c.length;t+=1)tt(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)et(l[t]);o=!1},d(t){t&&w(e),b(l,t)}}}function Ft(t,e,n){let o;i(t,gt,(t=>n(1,o=t)));let{acceptKeyInput:c}=e;return t.$$set=t=>{"acceptKeyInput"in t&&n(0,c=t.acceptKeyInput)},[c,o]}class Pt extends it{constructor(t){super(),ut(this,t,Ft,Ht,s,{acceptKeyInput:0})}}function Yt(e){let n,o,l,s,r,u,i,a;return{c(){n=k("div"),o=k("button"),l=x("Check"),s=D(),r=k("button"),u=x("Reveal"),o.disabled=e[0],I(o,"class","svelte-1o1cqv9"),r.disabled=e[0],I(r,"class","svelte-1o1cqv9"),I(n,"class","svelte-1o1cqv9")},m(t,c){v(t,n,c),g(n,o),g(o,l),g(n,s),g(n,r),g(r,u),i||(a=[C(o,"click",e[1]),C(r,"click",e[2])],i=!0)},p(t,[e]){1&e&&(o.disabled=t[0]),1&e&&(r.disabled=t[0])},i:t,o:t,d(t){t&&w(n),i=!1,c(a)}}}function Jt(t,e,n){let o,c,l;i(t,gt,(t=>n(5,o=t))),i(t,wt,(t=>n(3,c=t))),i(t,$t,(t=>n(4,l=t)));let s=!0;return t.$$.update=()=>{24&t.$$.dirty&&c&&n(0,s=!l[c[1]][c[0]].hasAnswer)},[s,()=>{if(c){o.flat().filter((t=>t[c[1]]===c[0])).forEach((t=>{t.content!==t.solution&&a(gt,o[t.rowNum][t.colNum].content=" ",o)}))}},()=>{if(c){o.flat().filter((t=>t[c[1]]===c[0])).forEach((t=>a(gt,o[t.rowNum][t.colNum].content=t.solution,o)))}},c,l]}class Vt extends it{constructor(t){super(),ut(this,t,Jt,Yt,s,{})}}function Zt(t,e,n){const o=t.slice();return o[8]=e[n],o}function Gt(t){let e,n,o,c,l,s,r,u,i=t[8].number+"",a=t[8].clue+"";function d(){return t[5](t[8])}return{c(){e=k("li"),n=k("span"),o=x(i),c=D(),l=x(a),s=D(),I(n,"class","svelte-1md3ysl"),I(e,"class","svelte-1md3ysl"),A(e,"hilight",t[2]?.[0]===t[8].number&&t[2]?.[1]===t[0])},m(t,i){v(t,e,i),g(e,n),g(n,o),g(e,c),g(e,l),g(e,s),r||(u=C(e,"click",d),r=!0)},p(n,c){t=n,2&c&&i!==(i=t[8].number+"")&&z(o,i),2&c&&a!==(a=t[8].clue+"")&&z(l,a),7&c&&A(e,"hilight",t[2]?.[0]===t[8].number&&t[2]?.[1]===t[0])},d(t){t&&w(e),r=!1,u()}}}function Qt(t){let e,n=t[8]&&Gt(t);return{c(){n&&n.c(),e=K()},m(t,o){n&&n.m(t,o),v(t,e,o)},p(t,o){t[8]?n?n.p(t,o):(n=Gt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&w(e)}}}function Xt(e){let n,o=e[1],c=[];for(let t=0;t<o.length;t+=1)c[t]=Qt(Zt(e,o,t));return{c(){n=k("ul");for(let t=0;t<c.length;t+=1)c[t].c();I(n,"class","svelte-1md3ysl")},m(t,e){v(t,n,e);for(let t=0;t<c.length;t+=1)c[t].m(n,null)},p(t,[e]){if(15&e){let l;for(o=t[1],l=0;l<o.length;l+=1){const s=Zt(t,o,l);c[l]?c[l].p(s,e):(c[l]=Qt(s),c[l].c(),c[l].m(n,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=o.length}},i:t,o:t,d(t){t&&w(n),b(c,t)}}}function te(t,e,n){let o,c,l;i(t,yt,(t=>n(6,o=t))),i(t,gt,(t=>n(7,c=t))),i(t,wt,(t=>n(2,l=t)));let{direction:s}=e,{clueData:r}=e,{acceptKeyInput:u}=e;const d=t=>{a(wt,l=[t,s],l);const e=c.flat().filter((e=>e[s]===t&&(e.starts===s||null!==e.starts&&e.across===e.down)))[0];a(yt,o=[e.rowNum,e.colNum],o),u()};return t.$$set=t=>{"direction"in t&&n(0,s=t.direction),"clueData"in t&&n(1,r=t.clueData),"acceptKeyInput"in t&&n(4,u=t.acceptKeyInput)},[s,r,l,d,u,t=>d(t.number)]}class ee extends it{constructor(t){super(),ut(this,t,te,Xt,s,{direction:0,clueData:1,acceptKeyInput:4})}}function ne(t){let e,n,o=t[1].author+"";return{c(){e=x(" by "),n=x(o)},m(t,o){v(t,e,o),v(t,n,o)},p(t,e){2&e&&o!==(o=t[1].author+"")&&z(n,o)},d(t){t&&w(e),t&&w(n)}}}function oe(t){let e,n,o,c,l,s,r,u,i,a,d,f,p,h,m,$,y,b,K,A,_,S,N,E,R,q,L,O=t[1].title+"",U=""!==t[1].author&&ne(t);return r=new qt({}),p=new Pt({props:{acceptKeyInput:_t.acceptKeyInput}}),m=new Vt({}),A=new ee({props:{direction:"across",clueData:t[2].across,acceptKeyInput:_t.acceptKeyInput}}),E=new ee({props:{direction:"down",clueData:t[2].down,acceptKeyInput:_t.acceptKeyInput}}),{c(){e=k("section"),n=k("h1"),o=x(O),U&&U.c(),c=D(),l=k("button"),l.textContent="Load",s=D(),ct(r.$$.fragment),u=D(),i=k("section"),a=k("section"),d=k("input"),f=D(),ct(p.$$.fragment),h=D(),ct(m.$$.fragment),$=D(),y=k("section"),b=k("h2"),b.textContent="Across",K=D(),ct(A.$$.fragment),_=D(),S=k("h2"),S.textContent="Down",N=D(),ct(E.$$.fragment),I(l,"class","svelte-1qkhuq1"),I(n,"class","svelte-1qkhuq1"),I(d,"type","text"),I(d,"maxlength","1"),I(d,"class","svelte-1qkhuq1"),I(i,"class","svelte-1qkhuq1"),I(e,"class","puzzle svelte-1qkhuq1")},m(w,k){v(w,e,k),g(e,n),g(n,o),U&&U.m(n,null),g(n,c),g(n,l),g(e,s),lt(r,e,null),g(e,u),g(e,i),g(i,a),g(a,d),t[4](d),g(a,f),lt(p,a,null),g(a,h),lt(m,a,null),g(i,$),g(i,y),g(y,b),g(y,K),lt(A,y,null),g(y,_),g(y,S),g(y,N),lt(E,y,null),R=!0,q||(L=C(l,"click",t[3]),q=!0)},p(t,[e]){(!R||2&e)&&O!==(O=t[1].title+"")&&z(o,O),""!==t[1].author?U?U.p(t,e):(U=ne(t),U.c(),U.m(n,c)):U&&(U.d(1),U=null);const l={};4&e&&(l.clueData=t[2].across),A.$set(l);const s={};4&e&&(s.clueData=t[2].down),E.$set(s)},i(t){R||(tt(r.$$.fragment,t),tt(p.$$.fragment,t),tt(m.$$.fragment,t),tt(A.$$.fragment,t),tt(E.$$.fragment,t),R=!0)},o(t){et(r.$$.fragment,t),et(p.$$.fragment,t),et(m.$$.fragment,t),et(A.$$.fragment,t),et(E.$$.fragment,t),R=!1},d(n){n&&w(e),U&&U.d(),st(r),t[4](null),st(p),st(m),st(A),st(E),q=!1,L()}}}function ce(t,e,n){let o,c,l,s;var r;i(t,pt,(t=>n(5,o=t))),i(t,mt,(t=>n(1,c=t))),i(t,$t,(t=>n(2,l=t))),r=()=>{_t.setKeyInput(s)},L().$$.on_mount.push(r),function(t){L().$$.on_destroy.push(t)}((()=>{_t.endKeyInput()}));return[s,c,l,()=>{a(pt,o="load",o)},function(t){U[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class le extends it{constructor(t){super(),ut(this,t,ce,oe,s,{})}}function se(t,e,n){const o=t.slice();return o[4]=e[n],o}function re(e){let n;return{c(){n=k("li"),n.textContent="No saved puzzles",I(n,"class","svelte-nd6ek")},m(t,e){v(t,n,e)},p:t,d(t){t&&w(n)}}}function ue(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=ie(se(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=K()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);v(t,e,n)},p(t,c){if(3&c){let l;for(n=t[0],l=0;l<n.length;l+=1){const s=se(t,n,l);o[l]?o[l].p(s,c):(o[l]=ie(s),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(t){b(o,t),t&&w(e)}}}function ie(t){let e,n,o,c,l,s,r,u,i,a=t[4].title+"",d=new Date(parseInt(t[4].date,10)).toLocaleString()+"";function f(){return t[2](t[4])}return{c(){e=k("li"),n=k("span"),o=x(a),c=x(" (saved at "),l=k("span"),s=x(d),r=x(")\n            "),I(n,"class","title svelte-nd6ek"),I(l,"class","date"),I(e,"class","svelte-nd6ek")},m(t,a){v(t,e,a),g(e,n),g(n,o),g(e,c),g(e,l),g(l,s),g(e,r),u||(i=C(e,"click",f),u=!0)},p(e,n){t=e},d(t){t&&w(e),u=!1,i()}}}function ae(e){let n;let o=function(t,e){return t[0].length?ue:re}(e),c=o(e);return{c(){n=k("ul"),c.c(),I(n,"class","svelte-nd6ek")},m(t,e){v(t,n,e),c.m(n,null)},p(t,[e]){c.p(t,e)},i:t,o:t,d(t){t&&w(n),c.d()}}}function de(t,e,n){let o;i(t,ft,(t=>n(3,o=t)));const c=(()=>{const t=window.localStorage;let e=[];for(let n=0;n<t.length;n++){let o=t.key(n);if("doAcross:"===o.substring(0,9)){const[n,c]=t.getItem(o).split(bt).slice(0,2);e.push({saveKey:o,title:n,date:c})}}return e=e.sort(((t,e)=>t.date===e.date?0:t.date>e.date?-1:1)),e})(),l=t=>{try{xt(t)}catch(t){a(ft,o="string"==typeof t?t:t.message,o)}};return[c,l,t=>l(t.saveKey)]}class fe extends it{constructor(t){super(),ut(this,t,de,ae,s,{})}}function pe(e){let n,o,l,s,r,u,i,a,d,f,p,h,m;return f=new fe({}),{c(){n=k("section"),o=k("h1"),o.textContent="Pick A Puzzle",l=D(),s=k("h2"),s.textContent="New",r=D(),u=k("input"),i=D(),a=k("h2"),a.textContent="Saved",d=D(),ct(f.$$.fragment),I(u,"type","file"),I(u,"accept",".puz")},m(t,c){v(t,n,c),g(n,o),g(n,l),g(n,s),g(n,r),g(n,u),g(n,i),g(n,a),g(n,d),lt(f,n,null),p=!0,h||(m=[C(u,"change",e[2]),C(u,"change",e[1])],h=!0)},p:t,i(t){p||(tt(f.$$.fragment,t),p=!0)},o(t){et(f.$$.fragment,t),p=!1},d(t){t&&w(n),st(f),h=!1,c(m)}}}function he(t,e,n){let o;return[o,()=>{(async t=>{var e,n,o;ht.set(null),mt.set(null);const c=new DataView(await t.arrayBuffer()),l={checksum:c.getUint16(0,!0),fileMagic:await t.slice(2,13).text(),cibChecksum:c.getUint16(14,!0),maskedLowChecksums:c.getUint32(16),maskedHighChecksums:c.getUint32(20),version:(await t.slice(24,27).text()).trimEnd(),reserved:null,scrambledChecksum:c.getUint16(30,!0),width:c.getUint8(44),height:c.getUint8(45),numClues:c.getUint16(46,!0),unknownBitmask:c.getUint16(48,!0),scrambledTag:c.getUint16(50,!0),saveKey:null};if("ACROSS&DOWN"!==l.fileMagic)return!1;l.saveKey="doAcross:"+l.checksum.toString(16)+l.cibChecksum.toString(16)+l.maskedLowChecksums.toString(16)+l.maskedHighChecksums.toString(16);try{return xt(l.saveKey),void ft.set("Loaded a previously saved version")}catch(t){}ht.set(l);const s=l.width*l.height,r=new RegExp(`.{${l.width}}`,"g"),u=(await t.slice(52,52+s).text()).match(r).map((t=>[...t])),i=(await t.slice(52+s,52+2*s).text()).match(r).map((t=>[...t]));let a=[],d=1,f=[],p={across:[],down:[]};for(let t=0;t<l.height;t++){let c=[];for(let s=0;s<l.width;s++){let l=0,r=0,h=null;"."!==i[t][s]&&("cell"===(null===(e=c[s-1])||void 0===e?void 0:e.type)?l=c[s-1].across:0!==s&&"block"!==c[s-1].type||void 0===i[t][s+1]||"."===i[t][s+1]||(l=d++,f.push([l,"across"]),h="across"),"cell"===(null===(n=a[t-1])||void 0===n?void 0:n[s].type)?r=a[t-1][s].down:0!==t&&"block"!==a[t-1][s].type||void 0===(null===(o=i[t+1])||void 0===o?void 0:o[s])||"."===i[t+1][s]||(r=h?l:d++,f.push([r,"down"]),h="down")),c.push({type:"."===i[t][s]?"block":"cell",rowNum:t,colNum:s,content:"-"===i[t][s]?" ":i[t][s],solution:u[t][s],across:l,down:r,starts:h}),l&&(void 0===p.across[l]&&(p.across[l]={}),void 0===p.across[l][u[t][s]]&&(p.across[l][u[t][s]]=0),p.across[l][u[t][s]]++),r&&(void 0===p.down[r]&&(p.down[r]={}),void 0===p.down[r][u[t][s]]&&(p.down[r][u[t][s]]=0),p.down[r][u[t][s]]++)}a.push(c)}gt.set(a);const h=(await t.slice(52+2*s).text()).split("\0"),m={title:h[0],author:h[1],copyright:h[2],notes:h[3+l.numClues]};mt.set(m);let g,$,y,v={across:[],down:[]};h.slice(3,3+l.numClues).forEach(((t,e)=>{[g,$]=f[e],y={number:g,direction:$,clue:t,hasAnswer:Object.keys(p[$][g]).length>1},"across"===$?v.across[g]=y:v.down[g]=y})),$t.set(v),yt.set(null),wt.set(null),pt.set("puzzle")})(o[0])},function(){o=this.files,n(0,o)}]}class me extends it{constructor(t){super(),ut(this,t,he,pe,s,{})}}function ge(t){let e,n;return e=new me({}),{c(){ct(e.$$.fragment)},m(t,o){lt(e,t,o),n=!0},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function $e(t){let e,n;return e=new le({}),{c(){ct(e.$$.fragment)},m(t,o){lt(e,t,o),n=!0},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function ye(t){let e,n,o,c,l,s;e=new At({});const r=[$e,ge],u=[];function i(t,e){return null!==t[0]&&"puzzle"===t[1]?0:1}return c=i(t),l=u[c]=r[c](t),{c(){ct(e.$$.fragment),n=D(),o=k("main"),l.c(),I(o,"class","svelte-1ipmjf6")},m(t,l){lt(e,t,l),v(t,n,l),v(t,o,l),u[c].m(o,null),s=!0},p(t,[e]){let n=c;c=i(t),c!==n&&(Q(),et(u[n],1,1,(()=>{u[n]=null})),X(),l=u[c],l||(l=u[c]=r[c](t),l.c()),tt(l,1),l.m(o,null))},i(t){s||(tt(e.$$.fragment,t),tt(l),s=!0)},o(t){et(e.$$.fragment,t),et(l),s=!1},d(t){st(e,t),t&&w(n),t&&w(o),u[c].d()}}}function ve(t,e,n){let o,c;return i(t,mt,(t=>n(0,o=t))),i(t,pt,(t=>n(1,c=t))),[o,c]}return new class extends it{constructor(t){super(),ut(this,t,ve,ye,s,{})}}({target:document.body,props:{}})}();
